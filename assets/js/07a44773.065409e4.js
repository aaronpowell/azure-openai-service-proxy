"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[710],{4137:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>f});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=p(r),d=i,f=m["".concat(l,".").concat(d)]||m[d]||c[d]||o;return r?n.createElement(f,a(a({ref:t},u),{},{components:r})):n.createElement(f,a({ref:t},u))}));function f(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:i,a[1]=s;for(var p=2;p<o;p++)a[p]=r[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},4834:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=r(7462),i=(r(7294),r(4137));const o={},a="Azure OpenAI rate limits",s={unversionedId:"rate-limits/openai-rate-limits",id:"rate-limits/openai-rate-limits",title:"Azure OpenAI rate limits",description:"Azure OpenAI model deployments have two limits, the first being tokens per minute, and the second being requests per minute. You are most likely to hit the Tokens per minute limit especially as you scale up the number of users using the system.",source:"@site/docs/60-rate-limits/20-openai-rate-limits.md",sourceDirName:"60-rate-limits",slug:"/rate-limits/openai-rate-limits",permalink:"/azure-openai-service-proxy/rate-limits/openai-rate-limits",draft:!1,editUrl:"https://github.com/gloveboxes/azure-openai-service-proxy/tree/master/docs/docs/60-rate-limits/20-openai-rate-limits.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Rate limits",permalink:"/azure-openai-service-proxy/category/rate-limits"},next:{title:"Proxy service rate limits",permalink:"/azure-openai-service-proxy/rate-limits/proxy-rate-limits"}},l={},p=[],u={toc:p},m="wrapper";function c(e){let{components:t,...o}=e;return(0,i.kt)(m,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"azure-openai-rate-limits"},"Azure OpenAI rate limits"),(0,i.kt)("p",null,"Azure OpenAI model deployments have two limits, the first being tokens per minute, and the second being requests per minute. You are most likely to hit the Tokens per minute limit especially as you scale up the number of users using the system."),(0,i.kt)("p",null,"Tokens per minute is the total number of tokens you can generate per minute. The number of tokens per call to OpenAI Chat API is the sum of the Max Token parameter, plus the tokens that make up your msg (system, assistant, and user), plus best_of parameter setting."),(0,i.kt)("p",null,"For example, you have a model deployment rated at 500K tokens per minute."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(6478).Z,width:"451",height:"222"})),(0,i.kt)("p",null,"If users set the Max Token parameter to 2048, with a message of 200 tokens, and you have 100 concurrent users sending on average 6 messages per minute then the total number of tokens per minute would be (2048 + 200) ",(0,i.kt)("em",{parentName:"p"}," 6 ")," 100) = 1348800 tokens per minute. This is well over the 500K tokens per minute limit of the Azure OpenAI model deployment and the system would be rate-limited and the user experience would be poor."),(0,i.kt)("p",null,"This is where the MaxTokenCap is useful for an event. The MaxTokenCap is the maximum number of tokens per request. This overrides the user's Max Token request for load balancing. For example, if you set the MaxTokenCap to 512, then the total number of tokens per minute would be (512 + 200) ",(0,i.kt)("em",{parentName:"p"}," 6 ")," 100) = 427200 tokens per minute. This is well under the 500K tokens per minute limit of the Azure OpenAI model deployment and will result in a better experience for everyone as it minimizes the chance of hitting the rate limit across the system."),(0,i.kt)("p",null,"MaxTokenCap is set at the event level and is configured in the Azure Storage Account table named ",(0,i.kt)("inlineCode",{parentName:"p"},"playgroundauthorization"),". See the section above on ",(0,i.kt)("a",{parentName:"p",href:"#adding-an-event"},"adding an event")," for more details."))}c.isMDXComponent=!0},6478:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/rate_limits-b565f8fe4befba43bdf6e7b0124ae685.png"}}]);