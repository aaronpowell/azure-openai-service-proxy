"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[239],{4137:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>y});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(r),m=o,y=u["".concat(p,".").concat(m)]||u[m]||d[m]||a;return r?n.createElement(y,i(i({ref:t},c),{},{components:r})):n.createElement(y,i({ref:t},c))}));function y(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3635:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var n=r(7462),o=(r(7294),r(4137));const a={},i="OpenAI proxy service",l={unversionedId:"service-installation/OpenAI-Proxy",id:"service-installation/OpenAI-Proxy",title:"OpenAI proxy service",description:"The solution consists of two parts, a proxy service, and a web client with a similar look and feel to the official Azure OpenAI Playground. The proxy service is a Python FastAPI app that proxies requests to the OpenAI API.",source:"@site/docs/20-service-installation/10-OpenAI-Proxy.md",sourceDirName:"20-service-installation",slug:"/service-installation/OpenAI-Proxy",permalink:"/azure-openai-service-proxy/service-installation/OpenAI-Proxy",draft:!1,editUrl:"https://github.com/gloveboxes/azure-openai-service-proxy/tree/master/docs/docs/20-service-installation/10-OpenAI-Proxy.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Service installation",permalink:"/azure-openai-service-proxy/category/service-installation"},next:{title:"Scaling the Proxy Service",permalink:"/azure-openai-service-proxy/service-installation/scaling-proxy-service"}},p={},s=[{value:"Setup",id:"setup",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Required software",id:"required-software",level:3},{value:"Deploying",id:"deploying",level:2}],c={toc:s},u="wrapper";function d(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"openai-proxy-service"},"OpenAI proxy service"),(0,o.kt)("p",null,"The solution consists of two parts, a proxy service, and a web client with a similar look and feel to the official Azure OpenAI Playground. The proxy service is a Python FastAPI app that proxies requests to the OpenAI API."),(0,o.kt)("h2",{id:"setup"},"Setup"),(0,o.kt)("p",null,"This repo is set up for deployment on Azure Container Apps using the configuration files in the ",(0,o.kt)("inlineCode",{parentName:"p"},"infra")," folder."),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"An Azure subscription"),(0,o.kt)("li",{parentName:"ol"},"Deployed Azure OpenAI Models")),(0,o.kt)("h3",{id:"required-software"},"Required software"),(0,o.kt)("p",null,"Tested on Windows, macOS and Ubuntu 22.04."),(0,o.kt)("p",null,"Install:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://code.visualstudio.com/"},"VS Code")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers"},"VS Code Dev Containers extension")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://www.docker.com/products/docker-desktop"},"Docker"))),(0,o.kt)("h2",{id:"deploying"},"Deploying"),(0,o.kt)("p",null,"The recommended way to deploy this app is with Dev Containers. Install the ",(0,o.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers"},"VS Code Remote Containers extension")," and Docker, open this repository in a container and you'll be ready to go."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Clone the repo:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/gloveboxes/azure-openai-service-proxy.git\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Using VS Code, open the ",(0,o.kt)("inlineCode",{parentName:"p"},"azure-openai-service-proxy/src/endpoint/simple-fastapi-container")," folder:")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You will be prompted to ",(0,o.kt)("inlineCode",{parentName:"p"},"Reopen in Container"),", click the button to do so.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Login to Azure:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"azd auth login\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Provision and deploy all the resources:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"azd up\n")),(0,o.kt)("p",{parentName:"li"},"It will prompt you to provide an ",(0,o.kt)("inlineCode",{parentName:"p"},"azd"),' environment name (like "openai-proxy"), select a subscription from your Azure account, and select a location (like "eastus"). Then it will provision the resources in your account and deploy the latest code. If you get an error with deployment, changing the location can help, as there may be availability constraints for some of the resources.'),(0,o.kt)("p",{parentName:"li"},"On completion, the following Azure resources will be provisioned:"),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"Azure OpenAI Playground experience",src:r(8869).Z,width:"1567",height:"560"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"When ",(0,o.kt)("inlineCode",{parentName:"p"},"azd")," has finished deploying you'll see a link to the Azure Resource Group created for the solution.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To make any changes to the app code, just run:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"azd deploy\n")))))}d.isMDXComponent=!0},8869:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/azure_resources-2df47c773ad1abbaca6dee9dd774f580.png"}}]);